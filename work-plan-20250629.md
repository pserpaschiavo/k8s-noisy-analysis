Objetivo:
    Consolidar os resultados estatÃ­sticos obtidos por round em uma anÃ¡lise robusta por mÃ©trica Ã— fase Ã— tenant, permitindo generalizaÃ§Ã£o e visualizaÃ§Ã£o dos efeitos com confianÃ§a.

ğŸš¦ Etapa 0 â€“ Ponto de partida (o que vocÃª jÃ¡ tem)
Recurso	Status
Dados organizados por round	âœ…
AnÃ¡lise descritiva por mÃ©trica/fase	âœ…
CorrelaÃ§Ãµes, causalidade e plots	âœ…
ComparaÃ§Ãµes intra-round (fase vs fase)	âœ…

    ğŸ’¡ VocÃª jÃ¡ tem todos os dados fragmentados â€” agora o trabalho Ã© integrar com estratÃ©gia.

ğŸ§© Etapa 1 â€“ PadronizaÃ§Ã£o e Coleta de Resultados
âœ… AÃ§Ã£o:

    Criar um extrator unificado que recolha os outputs por round:

        Cohen's d  âœ…

        p-valor  âœ…

        Eta-squared (se estiver usando)  âœ…

        CorrelaÃ§Ã£o intra-fase  â³ Em andamento

        Causalidade (Granger/TE)  âœ…

    ğŸ“‹ Estado atual de implementaÃ§Ã£o:
        - Parcialmente implementado em src/analysis_multi_round.py
        - FunÃ§Ã£o _load_causality_matrices() jÃ¡ carrega matrizes de causalidade âœ…
        - Extrator para estatÃ­sticas de Cohen's d e p-valores em src/effect_size.py âœ…
        - Falta implementar coleta de correlaÃ§Ãµes intra-fase de forma unificada â³

    ğŸ”„ PrÃ³ximo passo:
        - FunÃ§Ã£o extract_effect_sizes() para coletar Cohen's d e p-valores âœ…
        - FunÃ§Ãµes para extrair Eta-squared âœ…
        - Estruturar dados em formato padrÃ£o para facilitar agregaÃ§Ãµes âœ…
        
    ğŸ’» Detalhes tÃ©cnicos:
        - Implementar em src/analysis_multi_round.py uma funÃ§Ã£o extract_effect_sizes(context, rounds, metrics, phases, tenants) âœ…
          * DataFrame com colunas: round_id, metric_name, experimental_phase, tenant_id, baseline_phase, effect_size, p_value, eta_squared âœ…
        - Utilizar a biblioteca statsmodels para calcular o Cohen's d e Eta-squared âœ…
        - Implementar extract_phase_correlations() para coletar correlaÃ§Ãµes por fase â³
        - Armazenar resultados em formato padronizado para facilitar agregaÃ§Ãµes posteriores âœ…
        
    ğŸ” SugestÃµes de melhoria:
        - Implementar cache de resultados para evitar recÃ¡lculos âœ…
        - Adicionar opÃ§Ã£o para paralelizar a extraÃ§Ã£o usando multiprocessing âœ…
        - Implementar verificaÃ§Ã£o de qualidade dos dados estatÃ­sticos extraÃ­dos âœ…

ğŸ§  Etapa 2 â€“ AgregaÃ§Ã£o EstatÃ­stica
âœ… AÃ§Ã£o:

    Para cada mÃ©trica Ã— fase Ã— tenant:

        Calcular:

            MÃ©dia do efeito  â³ Em andamento

            Desvio padrÃ£o  â³ Em andamento

            IC95%  âŒ NÃ£o implementado

            p-valor combinado (Fisher ou Stouffer)  âŒ NÃ£o implementado

            Score de estabilidade (ex: coeficiente de variaÃ§Ã£o)  âœ…

    ğŸ“‹ Estado atual de implementaÃ§Ã£o:
        - analyze_round_consistency() calcula coeficiente de variaÃ§Ã£o (CV) âœ…
        - FunÃ§Ã£o test_friedmanchisquare para anÃ¡lise estatÃ­stica âœ…
        - Falta implementar cÃ¡lculo de IC95% para efeitos âŒ
        - Falta implementar mÃ©todos de combinaÃ§Ã£o de p-valores (Fisher/Stouffer) âŒ

    ğŸ”„ PrÃ³ximo passo:
        - Implementar funÃ§Ã£o aggregate_effect_sizes() para calcular mÃ©dia, desvio padrÃ£o, IC95% â³ Em andamento
        - Adicionar mÃ©todos para p-valor combinado (Fisher e Stouffer) âŒ
        - Calcular scores de estabilidade adicionais alÃ©m do CV â³
        
    ğŸ’» Detalhes tÃ©cnicos:
        - Implementar em src/analysis_multi_round.py a funÃ§Ã£o aggregate_effect_sizes(effect_sizes_df) que:
          * Agrupa por metric_name, experimental_phase, tenant_id â³
          * Calcula mÃ©dia e desvio padrÃ£o para o tamanho de efeito entre os rounds â³
          * Calcula IC95% usando bootstrapping ou estatÃ­stica t âŒ
          * Implementa mÃ©todos de meta-anÃ¡lise para combinaÃ§Ã£o de p-valores: âŒ
            - MÃ©todo de Fisher: Ï‡Â² = -2 * Î£ log(p_i) âŒ
            - MÃ©todo de Stouffer: Z = Î£z_i / âˆšn onde z_i = Î¦â»Â¹(1-p_i) âŒ
        - Implementar metrics_stability_score() para calcular mÃ©tricas adicionais de estabilidade â³
        
    ğŸ” SugestÃµes de melhoria:
        - Adicionar detecÃ§Ã£o automÃ¡tica de outliers em rounds especÃ­ficos âŒ
        - Implementar visualizaÃ§Ã£o de forest plots para meta-anÃ¡lise âŒ
        - Adicionar cÃ¡lculo de poder estatÃ­stico e tamanho de amostra necessÃ¡rio âŒ

ğŸ“Š Etapa 3 â€“ VisualizaÃ§Ã£o Consolidada
âœ… AÃ§Ã£o:

    GeraÃ§Ã£o de:

        Heatmaps de tamanho de efeito mÃ©dio  âŒ NÃ£o implementado

        Boxplots de variabilidade por round  â³ Em andamento

        Error bars com IC95%  âŒ NÃ£o implementado

        GrÃ¡ficos de dispersÃ£o: efeito Ã— p-valor Ã— variabilidade  âŒ NÃ£o implementado

    ğŸ“‹ Estado atual de implementaÃ§Ã£o:
        - FunÃ§Ã£o generate_consolidated_heatmap() existe mas precisa ser adaptada â³
        - FunÃ§Ã£o generate_all_enhanced_consolidated_boxplots() parcialmente implementada â³
        - Falta implementar grÃ¡ficos de error bars com IC95% âŒ
        - Falta implementar grÃ¡ficos de dispersÃ£o para relaÃ§Ã£o efeito Ã— p-valor Ã— variabilidade âŒ

    ğŸ”„ PrÃ³ximo passo:
        - Adaptar heatmap para visualizar tamanho de efeito mÃ©dio âŒ
        - Implementar visualizaÃ§Ã£o de error bars com IC95% âŒ
        - Criar funÃ§Ã£o para grÃ¡ficos de dispersÃ£o multidimensionais âŒ
        
    ğŸ’» Detalhes tÃ©cnicos:
        - Atualizar em src/visualization/advanced_plots.py a funÃ§Ã£o para gerar heatmaps: âŒ
          * generate_effect_size_heatmap(aggregated_effects_df, output_dir, cmap='RdBu_r') âŒ
          * Utilizar matplotlib/seaborn para gerar heatmaps com cÃ©lulas coloridas por tamanho de efeito âŒ
          * Adicionar anotaÃ§Ãµes para p-valores significativos (asteriscos) âŒ
        - Implementar plot_effect_error_bars() para visualizar intervalos de confianÃ§a âŒ
        - Criar funÃ§Ã£o plot_effect_scatter() para grÃ¡ficos de dispersÃ£o multivariados âŒ
        - Implementar funÃ§Ã£o generate_effect_forest_plot() para visualizaÃ§Ã£o estilo meta-anÃ¡lise âŒ
        
    ğŸ” SugestÃµes de melhoria:
        - Adicionar interatividade usando Plotly para exploraÃ§Ã£o de dados âŒ
        - Implementar exportaÃ§Ã£o automÃ¡tica para formatos de publicaÃ§Ã£o (SVG, PDF) âŒ
        - Adicionar geraÃ§Ã£o de relatÃ³rios visuais em formato HTML ou dashboard âŒ

ğŸ”¬ Etapa 4 - InterpretaÃ§Ã£o e ValidaÃ§Ã£o (Adicional)
âœ… AÃ§Ã£o:

    Implementar:

        AnÃ¡lise de robustez dos achados estatÃ­sticos  âŒ NÃ£o implementado

        Testes de sensibilidade para confirmar limites de significÃ¢ncia  âŒ NÃ£o implementado

        Resumos automatizados dos achados principais  â³ Em andamento

    ğŸ“‹ Estado atual de implementaÃ§Ã£o:
        - Parcial na funÃ§Ã£o generate_multi_round_report() â³
        - Faltam testes de robustez e sensibilidade âŒ
        - Resumos automatizados estÃ£o incompletos â³

    ğŸ”„ PrÃ³ximo passo:
        - Adicionar mÃ©tricas de robustez estatÃ­stica âŒ
        - Implementar testes de sensibilidade âŒ
        - Melhorar a geraÃ§Ã£o automÃ¡tica de insights â³
        
    ğŸ’» Detalhes tÃ©cnicos:
        - Implementar em src/analysis_multi_round.py funÃ§Ãµes para anÃ¡lise de robustez: âŒ
          * perform_robustness_analysis(aggregated_effects_df) que: âŒ
            - Realiza anÃ¡lise leave-one-out para detectar dependÃªncia de rounds especÃ­ficos âŒ
            - Calcula a estabilidade das conclusÃµes variando limiares de significÃ¢ncia âŒ
            - Quantifica a incerteza usando mÃ©todos bayesianos ou bootstrap âŒ
        - Implementar generate_automated_insights() para criar resumos automÃ¡ticos de: âŒ
          * Efeitos consistentes entre rounds âŒ
          * Anomalias e exceÃ§Ãµes detectadas âŒ
          * RecomendaÃ§Ãµes baseadas em evidÃªncia âŒ
        
    ğŸ” SugestÃµes de melhoria:
        - Implementar modelo de linguagem para geraÃ§Ã£o de insights em linguagem natural âŒ
        - Adicionar classificaÃ§Ã£o de confiabilidade aos resultados (alta/mÃ©dia/baixa) âœ…
        - Implementar rank de relevÃ¢ncia dos achados para destacar os mais importantes âŒ

ğŸ“ Etapa 5 - IntegraÃ§Ã£o com Pipeline Principal (Adicional)
âœ… AÃ§Ã£o:

    Garantir:

        IntegraÃ§Ã£o fluida com o pipeline existente  â³ Em andamento

        OpÃ§Ãµes de configuraÃ§Ã£o via YAML  âœ…

        DocumentaÃ§Ã£o detalhada das novas funcionalidades  â³ Em andamento

    ğŸ“‹ Estado atual de implementaÃ§Ã£o:
        - MultiRoundAnalysisStage jÃ¡ existe e estÃ¡ integrado âœ…
        - run_multi_round_analysis.py jÃ¡ funciona como ponto de entrada âœ…
        - OpÃ§Ãµes de configuraÃ§Ã£o especÃ­ficas para as novas anÃ¡lises adicionadas âœ…
        - DocumentaÃ§Ã£o inicial criada âœ… mas precisa ser ampliada â³

    ğŸ”„ PrÃ³ximo passo:
        - Expandir opÃ§Ãµes no arquivo de configuraÃ§Ã£o YAML âœ…
        - Documentar novas funcionalidades âœ…
        - Criar exemplos de uso â³
        
    ğŸ’» Detalhes tÃ©cnicos:
        - Atualizar o config/pipeline_config_sfi2.yaml para incluir: âœ…
          * OpÃ§Ãµes de configuraÃ§Ã£o para anÃ¡lise multi-round âœ…
            ```yaml
            multi_round_analysis:
              effect_size:
                methods: ["cohen_d", "eta_squared"]
              meta_analysis:
                p_value_combination: "fisher"  # ou "stouffer"
                confidence_level: 0.95
              visualization:
                heatmap_colormap: "RdBu_r"
                show_significance_markers: true
            ```
          * OpÃ§Ãµes para controle de paralelizaÃ§Ã£o e cache âœ…
        - Atualizar documentaÃ§Ã£o no README.md com: â³
          * DescriÃ§Ã£o das novas funcionalidades âœ…
          * Exemplos de comando para executar a anÃ¡lise âœ…
          * InterpretaÃ§Ã£o dos resultados e outputs â³
        
    ğŸ” SugestÃµes de melhoria:
        - Adicionar testes unitÃ¡rios para as novas funcionalidades âŒ
        - Implementar logging detalhado para todas as etapas âœ…
        - Criar interface de linha de comando mais robusta com validaÃ§Ã£o de parÃ¢metros âŒ
        - Implementar cache inteligente para evitar reprocessamento de dados âœ…

âš¡ Plano de PriorizaÃ§Ã£o:
    1. Implementar extract_effect_sizes() (Etapa 1) âœ… CONCLUÃDO
    2. Implementar aggregate_effect_sizes() (Etapa 2) â³ EM ANDAMENTO
    3. Atualizar o heatmap e implementar error bars (Etapa 3) âŒ A IMPLEMENTAR 
    4. Adicionar opÃ§Ãµes ao arquivo de configuraÃ§Ã£o YAML (Etapa 5) âœ… CONCLUÃDO
    5. Desenvolver anÃ¡lises de robustez (Etapa 4) âŒ A IMPLEMENTAR
    6. Melhorar visualizaÃ§Ãµes e relatÃ³rios (Etapas 3 e 4) âŒ A IMPLEMENTAR
    7. Documentar novas funcionalidades (Etapa 5) â³ EM ANDAMENTO